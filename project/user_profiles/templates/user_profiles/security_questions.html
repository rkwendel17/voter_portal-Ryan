{% extends 'base.html' %}
<!--Bootstrap link: https://mdbootstrap.com/docs/standard/forms/input-fields/-->
{% block content %}
<h1>{% block title %} Security Questions {% endblock %}</h1>

<form method="post">
    <div class="container">
        <div class="row">
            <div class="col">
                <div class="form-group">
                    <label>Question 1</label>
                    <select class="form-control" name="question_1" id="question_1" required>
                      <option value="" selected>Choose a question</option>
                        {% for question in questions %}
                            <option value="{{ question.id }}">{{ question.text }}</option>
                        {% endfor %}
                    </select>
                    <br>
                    <input type="text" name="answer_1" id="answer_1"
                       placeholder="Answer" class="form-control"
                       value="{{ request.form['answer_1'] }}" required />
                </div>

                <div class="form-group">
                    <label>Question 2</label>
                    <select class="form-control" name="question_2" id="question_2" required>
                      <option value="" selected>Choose a question</option>
                        {% for question in questions %}
                            <option value="{{ question.id }}">{{ question.text }}</option>
                        {% endfor %}
                    </select>
                    <br>
                    <input type="text" name="answer_2" id="answer_2"
                       placeholder="Answer" class="form-control"
                       value="{{ request.form['answer_2'] }}" required />
                </div>

                <div class="form-group">
                    <label>Question 3</label>
                    <select class="form-control" name="question_3" id="question_3" required>
                      <option value="" selected>Choose a question</option>
                        {% for question in questions %}
                            <option value="{{ question.id }}">{{ question.text }}</option>
                        {% endfor %}
                    </select>
                    <br>
                    <input type="text" name="answer_3" id="answer_3"
                       placeholder="Answer" class="form-control"
                       value="{{ request.form['answer_3'] }}" required />
                </div>
            </div>
        </div>
    </div>

     <div class="row">
         <div class="col text-center">
            <div class="form-group">
                <button type="submit" class="btn btn-primary btn-lg" style="width:50%">Submit</button>
            </div>
         </div>
     </div>
</form>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(function(){
    var previous;

    // Could probably compact the function below if time allows in the future

    $('#question_1').on('focus', function () {
        // Store the current value on focus and on change
        previous = this.value;
    }).change(function() {
        if (previous != "") {
            $("#question_2 option[value=" + previous + "]").show();
            $("#question_3 option[value=" + previous + "]").show();
        }
        $("#question_2 option[value=" + $(this).val() + "]").hide();
        $("#question_3 option[value=" + $(this).val() + "]").hide();
    });

    $('#question_2').on('focus', function () {
        // Store the current value on focus and on change
        previous = this.value;
    }).change(function() {
        if (previous != "") {
            $("#question_1 option[value=" + previous + "]").show();
            $("#question_3 option[value=" + previous + "]").show();
        }
        $("#question_1 option[value=" + $(this).val() + "]").hide();
        $("#question_3 option[value=" + $(this).val() + "]").hide();
    });

    $('#question_3').on('focus', function () {
        // Store the current value on focus and on change
        previous = this.value;
    }).change(function() {
        if (previous != "") {
            $("#question_2 option[value=" + previous + "]").show();
            $("#question_1 option[value=" + previous + "]").show();
        }
        $("#question_2 option[value=" + $(this).val() + "]").hide();
        $("#question_1 option[value=" + $(this).val() + "]").hide();
    });
});
</script>
{% endblock %}